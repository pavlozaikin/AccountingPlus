{% extends 'base.html' %}
{% load static %}
{% block title %}{% if object %}Редагування запису{% else %}Створення запису{% endif %} — Облік+{% endblock %}
{% block messages %}{% endblock %}
{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-1 pb-2 mb-3 border-bottom">
  <h1 class="h2 mb-0">
    {% if object %}
      {% with category=object.account_category %}
        {% if category == 'призовник' %}
          Відомості про призовника
        {% elif category == 'військовозобовʼязаний' %}
          Відомості про військовозобовʼязаного
        {% elif category == 'резервіст' %}
          Відомості про резервіста
        {% else %}
          Відомості про призовника
        {% endif %}
      {% endwith %}
    {% else %}
      Новий запис
    {% endif %}
  </h1>
  <div class="btn-toolbar heading-toolbar mb-2 mb-md-0">
    {% if object %}
      <div class="btn-group">
        <button class="btn btn-primary dropdown-toggle" type="button" id="personActionsDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi bi-person-bounding-box"></i>
          Дії
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="personActionsDropdown">
          <li>
            <button form="personForm" type="submit" name="submit_action" value="recommend" class="dropdown-item">Перевірити дані</button>
          </li>
          <li>
            <a href="{% url 'persons:person_rules' object.pk %}" class="dropdown-item">Ознайомити з Правилами</a>
          </li>
        </ul>
      </div>
    {% endif %}
  </div>
</div>
<form id="personForm" method="post" novalidate>
  {% csrf_token %}
  {% include 'includes/messages.html' %}
  {% if recommendations %}
    <hr class="my-4" />
    <div class="alert alert-info mb-4" role="status">
      <h2 class="h5">Рекомендації з військового обліку</h2>
      <ul class="mb-0">
        {% for recommendation in recommendations %}
          <li>{{ recommendation }}</li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}
  <h3 class="h5 mt-2 mb-3">Облікові дані</h3>
  <div class="row g-3">
    {% include 'includes/form_field.html' with field=form.last_name wrapper_class='col-md-6 mb-3' %}
    {% include 'includes/form_field.html' with field=form.first_name wrapper_class='col-md-6 mb-3' %}
  </div>
  <div class="row g-3">
    {% include 'includes/form_field.html' with field=form.middle_name wrapper_class='col-md-6 mb-3' %}
    {% include 'includes/form_field.html' with field=form.gender wrapper_class='col-md-6 mb-3' %}
  </div>
  <div class="row g-3">
    {% include 'includes/form_field.html' with field=form.birth_date wrapper_class='col-md-6 mb-3' %}
    {% include 'includes/form_field.html' with field=form.rnokpp wrapper_class='col-md-6 mb-3' %}
  </div>
  {% include 'includes/form_field.html' with field=form.address_registered wrapper_class='mb-3' %}
  {% include 'includes/form_field.html' with field=form.address_actual wrapper_class='mb-3' %}
  <div class="row g-3">
    {% include 'includes/form_field.html' with field=form.phone wrapper_class='col-md-6 mb-3' %}
    {% include 'includes/form_field.html' with field=form.email wrapper_class='col-md-6 mb-3' %}
  </div>

  <hr class="my-4" />
  <h3 class="h5 mt-2 mb-3">Призначення та звільнення</h3>
  {% include 'includes/form_field.html' with field=form.position_name wrapper_class='mb-3' %}
  <div class="row g-3">
    {% include 'includes/form_field.html' with field=form.appoint_order_date wrapper_class='col-md-6 mb-3' %}
    {% include 'includes/form_field.html' with field=form.dismiss_order_date wrapper_class='col-md-6 mb-3' %}
  </div>

  <hr class="my-4" />
  <h3 class="h5 mt-2 mb-3">Звання та спеціальність</h3>
  {% include 'includes/form_field.html' with field=form.account_category wrapper_class='mb-3' %}
  <div class="row g-3">
    {% include 'includes/form_field.html' with field=form.mil_rank wrapper_class='col-md-6 mb-3' %}
    {% include 'includes/form_field.html' with field=form.vos_code wrapper_class='col-md-6 mb-3' %}
  </div>

  <hr class="my-4" />
  <h3 class="h5 mt-2 mb-3">Військово-обліковий документ та ЄДРПВР</h3>
  {% include 'includes/form_field.html' with field=form.tcksp wrapper_class='mb-3' %}
  {% include 'includes/form_field.html' with field=form.edrpvr_number wrapper_class='mb-3' %}
  {% include 'includes/form_field.html' with field=form.doc_type wrapper_class='mb-3' %}
  {% include 'includes/form_field.html' with field=form.doc_series_number wrapper_class='mb-3' %}

  <hr class="my-4" />
  <h3 class="h5 mt-2 mb-3">Паспорт громадянина України</h3>
  {% include 'includes/form_field.html' with field=form.passport_series_number wrapper_class='mb-3' %}
  <div class="row g-3">
    {% include 'includes/form_field.html' with field=form.passport_issued_by wrapper_class='col-md-6 mb-3' %}
    {% include 'includes/form_field.html' with field=form.passport_issued_date wrapper_class='col-md-6 mb-3' %}
  </div>

  <hr class="my-4" />
  <h3 class="h5 mt-2 mb-3">Відстрочка та бронювання</h3>
  <h4 class="h6 mt-2 mb-3">Відстрочка</h4>
  {% include 'includes/form_field.html' with field=form.deferral_until wrapper_class='mb-3' %}
  {% include 'includes/form_field.html' with field=form.deferral_reason wrapper_class='mb-3' %}
  <h4 class="h6 mt-4 mb-3">Бронювання</h4>
  {% include 'includes/form_field.html' with field=form.booking_until wrapper_class='mb-3' %}

  <hr class="my-4" />
  <h3 class="h5 mt-2 mb-3">Мобілізаційне розпорядження</h3>
  <div class="row g-3">
    {% include 'includes/form_field.html' with field=form.mobil_order_date wrapper_class='col-md-6 mb-3' %}
    {% include 'includes/form_field.html' with field=form.unit_number wrapper_class='col-md-6 mb-3' %}
  </div>

  <hr class="my-4" />
  <h3 class="h5 mt-2 mb-3">Повідомлення до ТЦК та СП</h3>
  <div class="row g-3">
    {% include 'includes/form_field.html' with field=form.notif_appoint_date wrapper_class='col-md-6 mb-3' %}
    {% include 'includes/form_field.html' with field=form.notif_dismiss_date wrapper_class='col-md-6 mb-3' %}
  </div>

  <div class="btn-toolbar mt-4 mb-3" role="toolbar" aria-label="Група дій">
    <div class="btn-group" role="group" aria-label="Керування записом">
      <button type="submit" name="submit_action" value="save" class="btn btn-success d-flex align-items-center gap-2">
        <i class="bi bi-check2-circle"></i>
        Зберегти
      </button>
      {% if object %}
        <a href="{% url 'persons:person_delete' object.pk %}" class="btn btn-danger d-flex align-items-center gap-2">
          <i class="bi bi-trash3"></i>
          Видалити
        </a>
      {% endif %}
    </div>
  </div>
</form>
{% endblock %}
{% block extra_js %}
  {{ block.super }}
  <script src="{% static 'persons/js/tck_autocomplete.js' %}"></script>
{% endblock %}
